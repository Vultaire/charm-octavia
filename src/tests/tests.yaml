charm_name: octavia
gate_bundles:
- bionic-rocky
- bionic-rocky-ha
- bionic-stein
- cosmic-rocky
smoke_bundles:
- bionic-rocky
comment: |
  Holding the ``disco-stein`` bundle pending LP: #1824112
  The `bionic-rocky-lxd` bundle currently fails due to a bug in LXD.
    https://github.com/lxc/lxd/issues/4947
  Holding the ``cosmic-rocky-lxd`` bundle awaiting required changes to CI.
  Holding the ``cosmic-rocky-ha`` bundle due to it consitently timing out atm.
dev_bundles:
- disco-stein
- bionic-rocky-lxd
- cosmic-rocky-ha
- cosmic-rocky-lxd
target_deploy_status:
  octavia:
    workload-status: blocked
    workload-status-message: Awaiting
configure:
- zaza.openstack.charm_tests.octavia.setup.configure_octavia
- zaza.openstack.charm_tests.octavia.setup.add_amphora_image
- zaza.openstack.charm_tests.glance.setup.add_lts_image
- zaza.openstack.charm_tests.nova.setup.create_flavors
- zaza.openstack.charm_tests.nova.setup.manage_ssh_key
- zaza.openstack.charm_tests.neutron.setup.basic_overcloud_network
- zaza.openstack.charm_tests.octavia.setup.prepare_payload_instance
- zaza.openstack.charm_tests.octavia.setup.prepare_payload_instance
comment: |
  The repetition of ``prepare_payload_instance`` is intentional and gives the
  test multiple backends to feed Octavia.
tests:
- zaza.openstack.charm_tests.neutron_openvswitch.tests.NeutronOpenvSwitchOverlayTest
- zaza.openstack.charm_tests.octavia.tests.LBAASv2Test
- zaza.openstack.charm_tests.octavia.tests.CharmOperationTest
